<h2>Usuários</h2>

<div class="error" *ngIf="error">{{ error }}</div>

<div class="form-wrapper">
  <h3>{{ editingId ? 'Editar Usuário' : 'Novo Usuário' }}</h3>

  <form [formGroup]="form" (ngSubmit)="salvar()">
    <div class="form-group">
      <label>Nome completo</label>
      <input formControlName="nomeCompleto" />
    </div>

    <div class="form-group">
      <label>Email</label>
      <input formControlName="email" type="email" />
    </div>

    <div class="form-group">
      <label>Senha</label>
      <input formControlName="senha" type="password" />
      <small>Precisa ter ao menos 8 caracteres, 1 maiúscula e 1 número.</small>
    </div>

    <div class="form-group">
      <label>Perfil</label>
      <select formControlName="perfil">
        <option *ngFor="let p of perfis" [value]="p">{{ p }}</option>
      </select>
    </div>

    <div class="form-group">
      <label>
        <input type="checkbox" formControlName="ativo" />
        Ativo
      </label>
    </div>

    <button type="submit">Salvar</button>
    <button type="button" (click)="novo()">Limpar</button>
  </form>
</div>

<h3>Lista de Usuários</h3>

<table class="table">
  <thead>
  <tr>
    <th>ID</th>
    <th>Nome</th>
    <th>Email</th>
    <th>Perfil</th>
    <th>Ativo</th>
    <th>Ações</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let u of usuarios">
    <td>{{ u.id }}</td>
    <td>{{ u.nomeCompleto }}</td>
    <td>{{ u.email }}</td>
    <td>{{ u.perfil }}</td>
    <td>{{ u.ativo ? 'Sim' : 'Não' }}</td>
    <td>
      <button (click)="editar(u)">Editar</button>
      <button (click)="alterarStatus(u)">
        {{ u.ativo ? 'Inativar' : 'Ativar' }}
      </button>
      <button (click)="excluir(u)">Excluir</button>
    </td>
  </tr>
  </tbody>
</table>
